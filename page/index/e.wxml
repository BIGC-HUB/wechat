<view class="tan">
    <view class="location" bindtap="bindTop">
        <view class="location-box">
            <text> {{township}} </text>
        </view>
    </view>

    <view class="card">
        <view class="we-container {{directionClass}}">
          <view class="we-wrapper"
            bindtouchstart="touchstart"
            bindtouchmove="touchmove"
            bindtouchend="touchend"
            animation="{{animationData}}">
            <!-- 首部添加 -->
            <view wx:if="{{cards.length > 3}}" class="we-slide" bindtap="bindAdd">
                <view class="add">
                    <image src="img/add@3x.png" />
                    <text> 添加目的地 </text>
                </view>
            </view>
            <!-- 周围路况 -->
            <view class="we-slide">
                <view class="zero-top" style="background-color:{{statusColor}}">
                    <text> 周围路况 </text>
                    <image bindtap="bindRefreshZero" class="refresh" src="img/iconRefresh@3x.png" />
                    <text class="bigFont" > {{status}} </text>
                </view>
                <view class="zero-main">
                    <text class="tittle"> 用户分享 </text>
                    <view class="share-box">
                        <block wx:for="{{share}}" wx:for-item="e" wx:key="key">
                            <view class="share">
                                <view class="circle"></view>
                                <text> {{e.street}}{{e.status}} </text>
                            </view>
                        </block>
                    </view>
                    <text class="tittle"> 畅通道路 </text>
                    <view class="smooth-box">
                        <block wx:for="{{smooth}}" wx:for-item="e" wx:key="key">
                            <view class="smooth">
                                <view class="circle"></view>
                                <text> {{e.street}}{{e.status}} </text>
                            </view>
                        </block>
                    </view>
                </view>
            </view>
            <!-- 卡片 -->
            <block wx:for="{{cards}}" wx:for-item="e" wx:key="key" >
                <view class="we-slide" data-id="{{index}}" bindtap="bindCard">
                    <image class="bg" src="img/{{jam[e.jam].id}}/bg@3x.png" />
                    <image data-id="{{index}}" data-btn="true" bindtap="bindRefresh"  class="refresh" src="img/iconRefresh@3x.png" />
                    <image data-id="{{index}}" data-btn="true" bindtap="bindSet" class="set" src="img/set@3x.png" />
                    <view class="jam"  style="color: {{jam[e.jam].color}}">
                        <text wx:if="{{e.jam.length > 1}}" class="tooLong"> {{e.jam}} </text>
                        <text wx:else class="text"> {{e.jam}} </text>
                    </view>
                    <view class="more" style="color: {{jam[e.jam].color}}">
                        <view class="time">
                            <text> {{e.time}} </text>
                            <text> min </text>
                        </view>
                        <view class="division"></view>
                        <view class="km">
                            <text> {{e.km}} </text>
                            <text> km </text>
                        </view>
                        <view class="division"></view>
                        <view class="name">
                            <image src="img/{{jam[e.jam].id}}/icon-{{e.icon}}.svg" />
                            <text> {{e.name}} </text>
                        </view>
                    </view>
                </view>
            </block>
            <!-- 尾部添加 -->
            <view class="we-slide" bindtap="bindAdd">
                <view class="add">
                    <image src="img/add@3x.png" />
                    <text> 添加目的地 </text>
                </view>
            </view>
          </view>
        </view>
    </view>
    <view class="cardDot">
        <block wx:for="{{cards.length > 3 ? cards.length + 3 : cards.length + 2}}" wx:for-item="e" wx:key="key" >
            <view wx:if="{{index === dotNow}}">
                <view class="dot dotNow" />
            </view>
            <view wx:else>
                <view class="dot" />
            </view>
        </block>
    </view>

    <view class="bottom">
        <image bindtap="bindReport" class="report" src="img/iconShangbao@3x.png" />
    </view>
</view>
